<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HZD:CEG</title>
	<link rel="icon" type="image/png" sizes="196x196" href="system/resources/favicon-192.png">
	<link rel="icon" type="image/png" sizes="160x160" href="system/resources/favicon-160.png">
	<link rel="icon" type="image/png" sizes="96x96" href="system/resources/favicon-96.png">
	<link rel="icon" type="image/png" sizes="64x64" href="system/resources/favicon-64.png">
	<link rel="icon" type="image/png" sizes="32x32" href="system/resources/favicon-32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="system/resources/favicon-16.png">
	<link rel="apple-touch-icon" href="system/resources/favicon-57.png">
	<link rel="apple-touch-icon" sizes="114x114" href="system/resources/favicon-114.png">
	<link rel="apple-touch-icon" sizes="72x72" href="system/resources/favicon-72.png">
	<link rel="apple-touch-icon" sizes="144x144" href="system/resources/favicon-144.png">
	<link rel="apple-touch-icon" sizes="60x60" href="system/resources/favicon-60.png">
	<link rel="apple-touch-icon" sizes="120x120" href="system/resources/favicon-120.png">
	<link rel="apple-touch-icon" sizes="76x76" href="system/resources/favicon-76.png">
	<link rel="apple-touch-icon" sizes="152x152" href="system/resources/favicon-152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="system/resources/favicon-180.png">
    <link rel="stylesheet" href="system/styles.css">
</head>
<body>
    <header>
        <img src="system/resources/title2.png">
        <img src="system/resources/title3.png">
    </header>

    <main>
        <nav class="nav">
            <img src="system/resources/title2.png" style="height: 40px;">
            <h1 style="padding-left: 10px; padding-right: 10px;">Encounter Generator</h1>
            <div class="dropdown">
                <div class="dropbtn" onclick="toggleDropdown(this)"></div>
                <div class="dropdown-content">
                    <a onclick="generateEncounterCard(false)">open as Encounter Card</a>
                    <a onclick="generateEncounterCard(true)">open as Encounter Card with enemy numbers</a>
                    <a onclick="copyLink(false)">copy Encounter Card link to clipboard</a>
                    <a onclick="copyLink(true)">copy Encounter Card with enemy numbers link to clipboard</a>
                </div>
            </div>
        </nav>

        <h2>Game Boxes for board generation</h2>
        <p>These are also used for encounter brief generation. To generate an encounter, at least one Game Box must be selected.</p>
        <table>
            <tr>
                <td><input type="checkbox" id="CG" name="CG" value="CG" onclick="update()"><label for="CG"> Core Game</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="SL" name="SL" value="SL" onclick="update()"><label for="SL"> Sacred Lands Expansion</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="FH" name="FH" value="FH" onclick="update()"><label for="FH"> Forge and Hammer Expansion</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="FW" name="FW" value="FW" onclick="update()"><label for="FW"> Frozen Wilds Expansion</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="SotS" name="SotS" value="SotS" onclick="update()"><label for="SotS"> Soldiers of the Sun Expansion</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="KS" name="KS" value="KS"><label for="KS"> Kickstarter Exclusives (cultists)</label><br></td>
            </tr>
        </table>
        
        <h2>Encounter Board</h2>
        <p>If the option to generate a plane grid of 3x3 tiles is used, there must be enough encounter tiles available. This means, at least two boxes must be selected. Elsewise errors will occur.</p>
        <div class="controls">
            <label>Maximum number of tiles of board: <input type="number" id="tileCount" value="4" min="1"></label>
            <input type="checkbox" id="chain" name="chain" value="chain" onclick="differ('chain')"><label for="chain"> chain tiles</label>
            <input type="checkbox" id="arrangeRandom" name="arrangeRandom" value="arrangeRandom" onclick="differ('arrangeRandom')"><label for="arrangeRandom"> arrange tiles random</label>
            <input type="checkbox" id="mosaik" name="mosaik" value="mosaik" onclick="differ('mosaik')"><label for="mosaik"> arrange tiles plane</label>
            <input type="checkbox" id="planeGrid2x2" name="planeGrid2x2" value="planeGrid2x2" onclick="differ('planeGrid2x2')"><label for="planeGrid2x2"> arrange tiles 2x2 (huge machine encounter)</label>
            <input type="checkbox" id="planeGrid3x3" name="planeGrid3x3" value="planeGrid3x3" onclick="differ('planeGrid3x3')"><label for="planeGrid3x3"> arrange tiles 3x3 (huge machine encounter)</label>
          <button onclick="generateGrid()">generate board</button>
        </div>

        <div id="output" class="grid"></div>

        <button id="generateTerrain" onclick="generateTerrain()">generate terrain</button>
        <h4 id="terrainSquare">Terrain (square symbol)</h4>
        <h4 id="terrainTriangle">Terrain (triangle symbol)</h4>
        
        <h2>Encounter Brief</h2>
        <h4>Encounter Brief Settings</h4>
        <table>
            <tr>
                <td><input type="checkbox" id="lvl4" name="lvl4" value="lvl4"><label for="lvl4"> Enable Level 4 encounter (huge machine encounter)</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="lvl5" name="lvl5" value="lvl5"><label for="lvl5"> Enable Level 5 encounter (huge machine encounter with additional secondary enemys)</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="TJ" name="TJ" value="TJ"><label for="TJ"> Thunderjaw Expansion (huge machine)</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="SB" name="SB" value="SB"><label for="SB"> Stormbird Expansion (huge machine)</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="FC" name="FC" value="FC"><label for="FC"> Fireclaw Expansion (huge machine)</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="RB" name="RB" value="RB"><label for="RB"> Rockbreaker Expansion (huge machine)</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="HN" name="HN" value="HN"><label for="HN"> Heart of the Nora Expansion (huge machine and normal enemy)</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="LB" name="LB" value="LB"><label for="LB"> The Lawless Badlands Expansion (bandits)</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="1-2" name="1-2" value="1-2" onclick="differ('1-2')"><label for="1-2"> 1-2 players</label><br></td>
            </tr>
            <tr>
                <td><input type="checkbox" id="3-4" name="3-4" value="3-4" onclick="differ('3-4')"><label for="3-4"> 3-4 players</label><br></td>
            </tr>
        </table>
        <div class="controls">
            <input type="checkbox" id="dualEnemys" name="dualEnemys" value="dualEnemys"><label for="dualEnemys"> dual enemys</label>
            <button onclick="generateEncounterBriefV6()">generate encounter brief</button>
        </div>
        <p>Warning: the level of the generated encounter is not exactly matching those of the original encounters. Additionally, an encounter borad must have been generated before generating an encounter brief.</p>
        <h4 id="encounterLevel">Encounter Level</h4>
        <h4 id="encounterResources">Encounter Resources</h4>
        <h4>Machine list</h4>
        <div id="encounterBrief">
            <table id="machineList">
                <tr><th>Primary Enemy (A)</th><th>Count</th><th>Secondary Enemy (B)</th><th>Count</th></tr>
            </table>
            <div id="difficultyBarContainer"></div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/lz-string@1.5.0/libs/lz-string.min.js"></script>

        <script src="system/scriptV2.js"></script>

		<script>
            function toggleDropdown(btn) {
                // Alle anderen Dropdowns schließen (optional)
                document.querySelectorAll('.dropdown').forEach(d => {
                    if (d !== btn.parentElement) d.classList.remove('show');
                });

                // Aktuelles Dropdown ein-/ausblenden
                btn.parentElement.classList.toggle('show');
            }

            // Schließen, wenn außerhalb getippt wird
            window.addEventListener('click', function(e) {
                if (!e.target.matches('.dropbtn')) {
                    document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('show'));
                }
            });
        </script>
    </main>

    <footer>
        <p></p>
    </footer>
</body>
	<!--
/*
 * Dieses Programm ist freie Software: Sie können es unter den Bedingungen
 * der GNU Affero General Public License, wie von der Free Software Foundation,
 * Version 3 der Lizenz oder (nach Ihrer Wahl) jeder späteren Version,
 * weiterverbreiten und/oder modifizieren.
 *
 * Dieses Programm wird in der Hoffnung verteilt, dass es nützlich sein wird,
 * jedoch OHNE JEDE GEWÄHRLEISTUNG; sogar ohne die implizite Gewährleistung
 * der MARKTFÄHIGKEIT oder EIGNUNG FÜR EINEN BESTIMMTEN ZWECK.
 * Siehe die GNU Affero General Public License für weitere Details.
 *
 * Eine Kopie der GNU Affero General Public License sollten Sie zusammen mit
 * diesem Programm erhalten haben. Falls nicht, siehe <https://www.gnu.org/licenses/>.
 *
 * Copyright (C) 2025 F.G. Schubert
 */
 /*
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program. If not, see <https://www.gnu.org/licenses/>.
 *
 * Copyright (C) 2025 F.G. Schubert
 */
-->
</html>










